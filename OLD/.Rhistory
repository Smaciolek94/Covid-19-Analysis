townplot("New York","New York")
townplot("Mercer","New Jersey")
countryplot("Italy")
stateplot <- function(region){
cases <- rep(0,n)
newcases <- rep(0,n)
deaths <- rep(0,n)
newdeaths <- rep(0,n)
cases <- as.numeric(cases)
newcases <- as.numeric(newcases)
deaths <- as.numeric(deaths)
newdeaths <- as.numeric(newdeaths)
regioncase <- uscases[which(uscases$Province_State==region),]
regiondeath <- usdeaths[which(usdeaths$Province_State==region),]
#regioncase <- as.numeric(regioncase)
#regiondeath <- as.numeric(regiondeath)
for (i in 1:n){
cases[i] <- sum(regioncase[i+2])
deaths[i] <- sum(regiondeath[i+2])
if (i > 1){
newcases[i] <- cases[i] - cases[i-1]
newdeaths[i] <- deaths[i] - deaths[i-1]
}
}
newcases[1] <- cases[1]
newdeaths[1] <- deaths[1]
main1 <- paste("Total Cases in:",region,date[n])
main2 <- paste("Total Deaths in:",region,date[n])
main3 <- paste("New Cases in:",region,date[n])
main4 <- paste("New Deaths in",region,date[n])
par(mfrow=c(2,2))
plot(date,cases,main=main1,ylab="cases",type="o")
plot(date,deaths,main=main2,ylab="deaths",type="o")
plot(date,newcases,main=main3,ylab="cases",type="o")
plot(date,newdeaths,main=main4,ylab="deaths",type="o")
}
stateplot("New Jersey")
cases <- rep(0,n)
newcases <- rep(0,n)
deaths <- rep(0,n)
newdeaths <- rep(0,n)
regioncase <- rawcases[which(rawcases$Country.Region==region),]
regiondeath <- rawdeaths[which(rawdeaths$Country.Region==region),]
region="US"
regioncase <- rawcases[which(rawcases$Country.Region==region),]
regiondeath <- rawdeaths[which(rawdeaths$Country.Region==region),]
regioncase <- as.numeric(regioncase)
regiondeath <- as.numeric(regiondeath)
countryplot <- function(region,cd){
cases <- rep(0,n)
newcases <- rep(0,n)
deaths <- rep(0,n)
newdeaths <- rep(0,n)
regioncase <- rawcases[which(rawcases$Country.Region==region),]
regiondeath <- rawdeaths[which(rawdeaths$Country.Region==region),]
regioncase <- as.numeric(regioncase)
regiondeath <- as.numeric(regiondeath)
for (i in 1:n){
cases[i] <- sum(regioncase[i+2])
deaths[i] <- sum(regiondeath[i+2])
if (i > 1){
newcases[i] <- cases[i] - cases[i-1]
newdeaths[i] <- deaths[i] - deaths[i-1]
}
}
newcases[1] <- cases[1]
newdeaths[1] <- deaths[1]
main1 <- paste("Total Cases in:",region,date[n])
main2 <- paste("Total Deaths in:",region,date[n])
main3 <- paste("New Cases in:",region,date[n])
main4 <- paste("New Deaths in",region,date[n])
#plot(date,cases,main=main1,ylab="cases",type="o")
#plot(date,deaths,main=main2,ylab="deaths",type="o")
if (cd="c"){
plot(date,newcases,main=main3,ylab="cases",type="o")
}
if (cd="d"){
plot(date,newdeaths,main=main4,ylab="deaths",type="o")
}
}
countryplot <- function(region,cd){
cases <- rep(0,n)
newcases <- rep(0,n)
deaths <- rep(0,n)
newdeaths <- rep(0,n)
regioncase <- rawcases[which(rawcases$Country.Region==region),]
regiondeath <- rawdeaths[which(rawdeaths$Country.Region==region),]
regioncase <- as.numeric(regioncase)
regiondeath <- as.numeric(regiondeath)
for (i in 1:n){
cases[i] <- sum(regioncase[i+2])
deaths[i] <- sum(regiondeath[i+2])
if (i > 1){
newcases[i] <- cases[i] - cases[i-1]
newdeaths[i] <- deaths[i] - deaths[i-1]
}
}
newcases[1] <- cases[1]
newdeaths[1] <- deaths[1]
main1 <- paste("Total Cases in:",region,date[n])
main2 <- paste("Total Deaths in:",region,date[n])
main3 <- paste("New Cases in:",region,date[n])
main4 <- paste("New Deaths in",region,date[n])
#plot(date,cases,main=main1,ylab="cases",type="o")
#plot(date,deaths,main=main2,ylab="deaths",type="o")
if (cd="c"){
plot(date,newcases,main=main3,ylab="cases",type="o")
}
if (cd="d"){
plot(date,newdeaths,main=main4,ylab="deaths",type="o")
}
}
stateplot <- function(region){
cases <- rep(0,n)
newcases <- rep(0,n)
deaths <- rep(0,n)
newdeaths <- rep(0,n)
cases <- as.numeric(cases)
newcases <- as.numeric(newcases)
deaths <- as.numeric(deaths)
newdeaths <- as.numeric(newdeaths)
regioncase <- uscases[which(uscases$Province_State==region),]
regiondeath <- usdeaths[which(usdeaths$Province_State==region),]
#regioncase <- as.numeric(regioncase)
#regiondeath <- as.numeric(regiondeath)
for (i in 1:n){
cases[i] <- sum(regioncase[i+2])
deaths[i] <- sum(regiondeath[i+2])
if (i > 1){
newcases[i] <- cases[i] - cases[i-1]
newdeaths[i] <- deaths[i] - deaths[i-1]
}
}
newcases[1] <- cases[1]
newdeaths[1] <- deaths[1]
main1 <- paste("Total Cases in:",region,date[n])
main2 <- paste("Total Deaths in:",region,date[n])
main3 <- paste("New Cases in:",region,date[n])
main4 <- paste("New Deaths in",region,date[n])
plot(date,cases,main=main1,ylab="cases",type="o")
plot(date,deaths,main=main2,ylab="deaths",type="o")
plot(date,newcases,main=main3,ylab="cases",type="o")
plot(date,newdeaths,main=main4,ylab="deaths",type="o")
}
countryplot <- function(region,cd){
cases <- rep(0,n)
newcases <- rep(0,n)
deaths <- rep(0,n)
newdeaths <- rep(0,n)
regioncase <- rawcases[which(rawcases$Country.Region==region),]
regiondeath <- rawdeaths[which(rawdeaths$Country.Region==region),]
regioncase <- as.numeric(regioncase)
regiondeath <- as.numeric(regiondeath)
for (i in 1:n){
cases[i] <- sum(regioncase[i+2])
deaths[i] <- sum(regiondeath[i+2])
if (i > 1){
newcases[i] <- cases[i] - cases[i-1]
newdeaths[i] <- deaths[i] - deaths[i-1]
}
}
newcases[1] <- cases[1]
newdeaths[1] <- deaths[1]
main1 <- paste("Total Cases in:",region,date[n])
main2 <- paste("Total Deaths in:",region,date[n])
main3 <- paste("New Cases in:",region,date[n])
main4 <- paste("New Deaths in",region,date[n])
#plot(date,cases,main=main1,ylab="cases",type="o")
#plot(date,deaths,main=main2,ylab="deaths",type="o")
if (cd=="c"){
plot(date,newcases,main=main3,ylab="cases",type="o")
}
if (cd=="d"){
plot(date,newdeaths,main=main4,ylab="deaths",type="o")
}
}
countryplot("US","d")
countryplot("China","c")
countryplot("China","cd")
countryplot <- function(region){
cases <- rep(0,n)
newcases <- rep(0,n)
deaths <- rep(0,n)
newdeaths <- rep(0,n)
cases <- as.numeric(cases)
newcases <- as.numeric(newcases)
deaths <- as.numeric(deaths)
newdeaths <- as.numeric(newdeaths)
regioncase <- rawcases[which(rawcases$Country.Region==region),]
regiondeath <- rawdeaths[which(rawdeaths$Country.Region==region),]
regioncase <- as.numeric(regioncase)
regiondeath <- as.numeric(regiondeath)
for (i in 1:n){
cases[i] <- sum(regioncase[i+2])
deaths[i] <- sum(regiondeath[i+2])
if (i > 1){
newcases[i] <- cases[i] - cases[i-1]
newdeaths[i] <- deaths[i] - deaths[i-1]
}
}
newcases[1] <- cases[1]
newdeaths[1] <- deaths[1]
main1 <- paste("Total Cases in:",region,date[n])
main2 <- paste("Total Deaths in:",region,date[n])
main3 <- paste("New Cases in:",region,date[n])
main4 <- paste("New Deaths in",region,date[n])
plot(date,cases,main=main1,ylab="cases",type="o")
plot(date,deaths,main=main2,ylab="deaths",type="o")
plot(date,newcases,main=main3,ylab="cases",type="o")
plot(date,newdeaths,main=main4,ylab="deaths",type="o")
}
countryplot("China")
#updating to make it easier for shiny
#importing data from Johns Hopkins Github
library(httr)
rawcases <- read.csv(url("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_global.csv"))
rawdeaths <-read.csv(url("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_deaths_global.csv"))
uscases <- read.csv(url("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_US.csv"))
usdeaths <- read.csv(url("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_deaths_US.csv"))
#old csv import as a backup
#rawcases <- read.csv("C:\\Users\\Stvma\\Documents\\GitHub\\Covid-19-Analysis\\Copy of time_series_covid_19_confirmed_4_8.csv",header=TRUE)
#rawdeaths <- read.csv("C:\\Users\\Stvma\\Documents\\GitHub\\Covid-19-Analysis\\Copy of time_series_covid_19_deaths_4_8_update.csv",header=TRUE)
rawcases <- rawcases[,-c(3:4)]
rawdeaths <- rawdeaths[,-c(3:4)]
uscases <- uscases[,-c(1:5,8:11)]
usdeaths <- usdeaths[,-c(1:5,8:12)]
#creating date vector and n dates for simplicity
n <- ncol(rawcases)-2
date <- 1:n
date <- as.Date(date,origin = "2020-01-21")
format(date,format = "%b %d %y")
countryplot <- function(region){
cases <- rep(0,n)
newcases <- rep(0,n)
deaths <- rep(0,n)
newdeaths <- rep(0,n)
cases <- as.numeric(cases)
newcases <- as.numeric(newcases)
deaths <- as.numeric(deaths)
newdeaths <- as.numeric(newdeaths)
regioncase <- rawcases[which(rawcases$Country.Region==region),]
regiondeath <- rawdeaths[which(rawdeaths$Country.Region==region),]
regioncase <- as.numeric(regioncase)
regiondeath <- as.numeric(regiondeath)
for (i in 1:n){
cases[i] <- sum(regioncase[i+2])
deaths[i] <- sum(regiondeath[i+2])
if (i > 1){
newcases[i] <- cases[i] - cases[i-1]
newdeaths[i] <- deaths[i] - deaths[i-1]
}
}
newcases[1] <- cases[1]
newdeaths[1] <- deaths[1]
main1 <- paste("Total Cases in:",region,date[n])
main2 <- paste("Total Deaths in:",region,date[n])
main3 <- paste("New Cases in:",region,date[n])
main4 <- paste("New Deaths in",region,date[n])
plot(date,cases,main=main1,ylab="cases",type="o")
plot(date,deaths,main=main2,ylab="deaths",type="o")
plot(date,newcases,main=main3,ylab="cases",type="o")
plot(date,newdeaths,main=main4,ylab="deaths",type="o")
}
countryplot("China")
region = "China"
cases <- rep(0,n)
newcases <- rep(0,n)
deaths <- rep(0,n)
newdeaths <- rep(0,n)
cases <- as.numeric(cases)
newcases <- as.numeric(newcases)
deaths <- as.numeric(deaths)
newdeaths <- as.numeric(newdeaths)
regioncase <- rawcases[which(rawcases$Country.Region==region),]
regiondeath <- rawdeaths[which(rawdeaths$Country.Region==region),]
regioncase <- as.numeric(regioncase)
regiondeath <- as.numeric(regiondeath)
View(rawdeaths)
View(regiondeath)
for (i in 1:n){
cases[i] <- sum(regioncase[i+2])
deaths[i] <- sum(regiondeath[i+2])
if (i > 1){
newcases[i] <- cases[i] - cases[i-1]
newdeaths[i] <- deaths[i] - deaths[i-1]
}
}
newcases[1] <- cases[1]
newdeaths[1] <- deaths[1]
main1 <- paste("Total Cases in:",region,date[n])
main2 <- paste("Total Deaths in:",region,date[n])
main3 <- paste("New Cases in:",region,date[n])
main4 <- paste("New Deaths in",region,date[n])
plot(date,cases,main=main1,ylab="cases",type="o")
plot(date,deaths,main=main2,ylab="deaths",type="o")
plot(date,newcases,main=main3,ylab="cases",type="o")
plot(date,newdeaths,main=main4,ylab="deaths",type="o")
countryplot("China")
countryplot <- function(region,cd){
cases <- rep(0,n)
newcases <- rep(0,n)
deaths <- rep(0,n)
newdeaths <- rep(0,n)
regioncase <- rawcases[which(rawcases$Country.Region==region),]
regiondeath <- rawdeaths[which(rawdeaths$Country.Region==region),]
#regioncase <- as.numeric(regioncase)
#regiondeath <- as.numeric(regiondeath)
for (i in 1:n){
cases[i] <- sum(regioncase[i+2])
deaths[i] <- sum(regiondeath[i+2])
if (i > 1){
newcases[i] <- cases[i] - cases[i-1]
newdeaths[i] <- deaths[i] - deaths[i-1]
}
}
newcases[1] <- cases[1]
newdeaths[1] <- deaths[1]
main1 <- paste("Total Cases in:",region,date[n])
main2 <- paste("Total Deaths in:",region,date[n])
main3 <- paste("New Cases in:",region,date[n])
main4 <- paste("New Deaths in",region,date[n])
#plot(date,cases,main=main1,ylab="cases",type="o")
#plot(date,deaths,main=main2,ylab="deaths",type="o")
if (cd=="c"){
plot(date,newcases,main=main3,ylab="cases",type="o")
}
if (cd=="d"){
plot(date,newdeaths,main=main4,ylab="deaths",type="o")
}
}
countryplot("China","d")
countryplot("China","c")
library(shiny); runApp('caseplot shiny.R')
runApp('caseplot shiny.R')
runApp('caseplot shiny.R')
runApp('caseplot shiny.R')
runApp('caseplot shiny.R')
runApp('caseplot shiny.R')
runApp('caseplot shiny.R')
runApp('caseplot shiny.R')
runApp('caseplot shiny.R')
runApp('caseplot shiny.R')
runApp('caseplot shiny.R')
countryplot("China")
runApp('caseplot shiny.R')
runApp('caseplot shiny.R')
runApp('caseplot shiny.R')
runApp('caseplot shiny.R')
runApp('caseplot shiny.R')
runApp('caseplot shiny.R')
runApp('caseplot shiny.R')
runApp('caseplot shiny.R')
runApp('caseplot shiny.R')
#importing data from Johns Hopkins Github
library(httr)
rawcases <- read.csv(url("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_global.csv"))
rawdeaths <-read.csv(url("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_deaths_global.csv"))
uscases <- read.csv(url("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_US.csv"))
usdeaths <- read.csv(url("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_deaths_US.csv"))
#old csv import as a backup
#rawcases <- read.csv("C:\\Users\\Stvma\\Documents\\GitHub\\Covid-19-Analysis\\Copy of time_series_covid_19_confirmed_4_8.csv",header=TRUE)
#rawdeaths <- read.csv("C:\\Users\\Stvma\\Documents\\GitHub\\Covid-19-Analysis\\Copy of time_series_covid_19_deaths_4_8_update.csv",header=TRUE)
rawcases <- rawcases[,-c(3:4)]
rawdeaths <- rawdeaths[,-c(3:4)]
uscases <- uscases[,-c(1:5,8:11)]
usdeaths <- usdeaths[,-c(1:5,8:12)]
#creating date vector and n dates for simplicity
n <- ncol(rawcases)-2
date <- 1:n
date <- as.Date(date,origin = "2020-01-21")
format(date,format = "%b %d %y")
countryplot <- function(region,cd){
cases <- rep(0,n)
newcases <- rep(0,n)
deaths <- rep(0,n)
newdeaths <- rep(0,n)
regioncase <- rawcases[which(rawcases$Country.Region==region),]
regiondeath <- rawdeaths[which(rawdeaths$Country.Region==region),]
#regioncase <- as.numeric(regioncase)
#regiondeath <- as.numeric(regiondeath)
for (i in 1:n){
cases[i] <- sum(regioncase[i+2])
deaths[i] <- sum(regiondeath[i+2])
if (i > 1){
newcases[i] <- cases[i] - cases[i-1]
newdeaths[i] <- deaths[i] - deaths[i-1]
}
}
newcases[1] <- cases[1]
newdeaths[1] <- deaths[1]
main1 <- paste("Total Cases in:",region,date[n])
main2 <- paste("Total Deaths in:",region,date[n])
main3 <- paste("New Cases in:",region,date[n])
main4 <- paste("New Deaths in",region,date[n])
#plot(date,cases,main=main1,ylab="cases",type="o")
#plot(date,deaths,main=main2,ylab="deaths",type="o")
if (cd=="c"){
plot(date,newcases,main=main3,ylab="cases",type="o")
}
if (cd=="d"){
plot(date,newdeaths,main=main4,ylab="deaths",type="o")
}
}
stateplot <- function(region){
cases <- rep(0,n)
newcases <- rep(0,n)
deaths <- rep(0,n)
newdeaths <- rep(0,n)
cases <- as.numeric(cases)
newcases <- as.numeric(newcases)
deaths <- as.numeric(deaths)
newdeaths <- as.numeric(newdeaths)
regioncase <- uscases[which(uscases$Province_State==region),]
regiondeath <- usdeaths[which(usdeaths$Province_State==region),]
#regioncase <- as.numeric(regioncase)
#regiondeath <- as.numeric(regiondeath)
for (i in 1:n){
cases[i] <- sum(regioncase[i+2])
deaths[i] <- sum(regiondeath[i+2])
if (i > 1){
newcases[i] <- cases[i] - cases[i-1]
newdeaths[i] <- deaths[i] - deaths[i-1]
}
}
newcases[1] <- cases[1]
newdeaths[1] <- deaths[1]
main1 <- paste("Total Cases in:",region,date[n])
main2 <- paste("Total Deaths in:",region,date[n])
main3 <- paste("New Cases in:",region,date[n])
main4 <- paste("New Deaths in",region,date[n])
plot(date,cases,main=main1,ylab="cases",type="o")
plot(date,deaths,main=main2,ylab="deaths",type="o")
plot(date,newcases,main=main3,ylab="cases",type="o")
plot(date,newdeaths,main=main4,ylab="deaths",type="o")
}
townplot <- function(county,region){
cases <- rep(0,n)
newcases <- rep(0,n)
deaths <- rep(0,n)
newdeaths <- rep(0,n)
cases <- as.numeric(cases)
newcases <- as.numeric(newcases)
deaths <- as.numeric(deaths)
newdeaths <- as.numeric(newdeaths)
towncase <- uscases[which(uscases$Province_State==region),]
towncase <- towncase[which(towncase$Admin2==county),]
towndeath <- usdeaths[which(uscases$Province_State==region),]
towndeath <- towndeath[which(towndeath$Admin2==county),]
for (i in 1:n){
cases[i] <- sum(towncase[i+2])
deaths[i] <- sum(towndeath[i+2])
if (i > 1){
newcases[i] <- cases[i] - cases[i-1]
newdeaths[i] <- deaths[i] - deaths[i-1]
}
}
main1 <- paste("Total Cases in:",county,region,date[n])
main2 <- paste("Total Deaths in:",county,region,date[n])
main3 <- paste("New Cases in:",county,region,date[n])
main4 <- paste("New Deaths in",county,region,date[n])
plot(date,cases,main=main1,ylab="cases",type="o")
plot(date,deaths,main=main2,ylab="deaths",type="o")
plot(date,newcases,main=main3,ylab="cases",type="o")
plot(date,newdeaths,main=main4,ylab="deaths",type="o")
}
runApp('caseplot shiny.R')
runApp('caseplot shiny.R')
runApp('caseplot shiny.R')
runApp('caseplot shiny.R')
runApp('caseplot shiny.R')
runApp('caseplot shiny.R')
runApp('caseplot shiny.R')
runApp('caseplot shiny.R')
runApp('caseplot shiny.R')
runApp('caseplot shiny.R')
runApp('caseplot shiny.R')
runApp('caseplot shiny.R')
runApp('caseplot shiny.R')
countryplot("China","d")
runApp('caseplot shiny.R')
runApp('caseplot shiny.R')
countrynames <- read.csv("C:\\Users\\Stvma\\Documents\\GitHub\\Covid-19-Analysis\\countrynames.csv.xlsx",header=FALSE)
View(countrynames)
countrynames <- read.csv("C:\\Users\\Stvma\\Documents\\GitHub\\Covid-19-Analysis\\countrynames.csv.xlsx",header=FALSE)
countrynames <- read.csv("C:\\Users\\Stvma\\Documents\\GitHub\\Covid-19-Analysis\\countrynames.csv",header=FALSE)
countrynames <- t(countrynames)
countrynames <- as.character(countrynames)
countrynames
runApp('caseplot shiny.R')
runApp('caseplot shiny.R')
countrynames
table(countrynames,clipboard)
table(countrynames,"clipboard")
runApp('caseplot shiny.R')
runApp('caseplot shiny.R')
runApp('Country Plot Shiny.R')
install.packages('rsconnect')
install.packages("rsconnect")
library(rsconnect)
library(shiny); runApp('Country Plot Shiny.R')
rsconnect::deployApp
library(shiny); runApp('Country Plot Shiny.R')
runApp('Country Plot/Country Plot Shiny.R')
runApp('Country Plot')
runApp('Country Plot')
shiny::runApp('Country Plot/Counry_Plots')
runApp('Country Plot/Counry_Plots')
runApp('State Plot/State_Plot')
runApp('State Plot/State_Plot')
runApp('State Plot/State_Plot')
runApp('State Plot/State_Plot')
runApp('Country Plot/Country_Plots')
