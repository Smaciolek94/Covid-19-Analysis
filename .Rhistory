uscases <- read.csv(url("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_US.csv"))
usdeaths <- read.csv(url("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_deaths_US.csv"))
#uscases <- uscases[,-c(1:10)]
#usdeaths <- usdeaths[,-c(1:10)] #use these for the R code
uscases <- uscases[,-c(1:11)]
usdeaths <- usdeaths[,-c(1:12)] #use these for the c++ code
casemat <- as.matrix(uscases)
dim(casemat) <- c(3255,87)
#trying to make a c++ funtion to speed it up
library(Rcpp)
Rcpp::sourceCpp('Rcpp_source.cpp')
Rcpp::sourceCpp('Rcpp_source.cpp')
first(casemat,4)
Rcpp::sourceCpp('Rcpp_source.cpp')
first(casemat,4)
Rcpp::sourceCpp('Rcpp_source.cpp')
first(casemat,6)
Rcpp::sourceCpp('Rcpp_source.cpp')
first(casemat,9)
Rcpp::sourceCpp('Rcpp_source.cpp')
Rcpp::sourceCpp('Rcpp_source.cpp')
first(casemat,8)
Rcpp::sourceCpp('Rcpp_source.cpp')
first(casemat,2)
Rcpp::sourceCpp('Rcpp_source.cpp')
first(casemat,6)
first(casemat,7)
first(casemat,9)
Rcpp::sourceCpp('Rcpp_source.cpp')
first(casemat,9)
first(casemat,256)
Rcpp::sourceCpp('Rcpp_source.cpp')
first(casemat,3000)
shares = c(62.2179, 17.4303, 3.0043, 3.0114, 25.3078, 3.0085, 78.3623, 19.0677, 29.7427, 15.8559, 3)
price = c(67.19,55.5,215.2899932861328,157.57000732421875,55.68000030517578,58.63999938964844,27.0,21.920000076293945,25.979999542236328,34.9900016784668,44.220001220703125)
cash = 5000
alc = c(.20,.05,.05,.05,.20,.05,.20,.05,.05,.08,.02)
uscases <- read.csv(url("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_US.csv"))
usdeaths <- read.csv(url("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_deaths_US.csv"))
#uscases <- uscases[,-c(1:10)]
#usdeaths <- usdeaths[,-c(1:10)] #use these for the R code
uscases <- uscases[,-c(1:11)]
usdeaths <- usdeaths[,-c(1:12)] #use these for the c++ code
casemat <- as.matrix(uscases)
dim(casemat) <- c(3255,87)
Rcpp::sourceCpp('Rcpp_source.cpp')
first(casemat,3000)
first(casemat,2000)
first(casemat,500)
Rcpp::sourceCpp('Rcpp_source.cpp')
Rcpp::sourceCpp('Rcpp_source.cpp')
first(casemat,800)
first(casemat,0)
first(casemat,-1)
first(casemat,1)
Rcpp::sourceCpp('Rcpp_source.cpp')
first(casemat,7)
Rcpp::sourceCpp('Rcpp_source.cpp')
first(casemat,6)
Rcpp::sourceCpp('Rcpp_source.cpp')
Rcpp::sourceCpp('Rcpp_source.cpp')
Rcpp::sourceCpp('Rcpp_source.cpp')
first(casemat,2000)
first(casemat,44)
library(Rcpp)
first <- rep(0,nrow(uscases))
for(i in 1:nrow(uscases)){
first[i] = first(casemat,i)
}
Rcpp::sourceCpp('Rcpp_source.cpp')
library(Rcpp)
first <- rep(0,nrow(uscases))
for(i in 1:nrow(uscases)){
first[i] = first(casemat,i)
}
uscases <- read.csv(url("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_US.csv"))
usdeaths <- read.csv(url("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_deaths_US.csv"))
#uscases <- uscases[,-c(1:10)]
#usdeaths <- usdeaths[,-c(1:10)] #use these for the R code
uscases <- uscases[,-c(1:11)]
usdeaths <- usdeaths[,-c(1:12)] #use these for the c++ code
casemat <- as.matrix(uscases)
dim(casemat) <- c(3255,88)
Rcpp::sourceCpp('Rcpp_source.cpp')
first(casemat,777)
firstdate <- rep(0,nrow(uscases))
for(i in 1:nrow(uscases)){
firstdate[i] <- first(casemat,i)
}
firstdate <- rep(0,nrow(uscases))
for(i in 1:nrow(uscases)-1){
firstdate[i] <- first(casemat,i)
}
first <- as.Date(first,origin = "1970-01-01")
first <- data.frame(uscases$Combined_Key,first)
hist(first$first,breaks=n,main="Histogram of the date of first cases in the US",ylab="number of counties/cities",xlab="Date of First Case",freq=TRUE)
n<-ncol(uscases)
n<-ncol(uscases)
#trying to make a c++ funtion to speed it up
library(Rcpp)
firstdate <- rep(0,nrow(uscases))
for(i in 1:nrow(uscases)-1){
firstdate[i] <- first(casemat,i)
}
firstdate <- as.Date(first,origin = "2020-01-22")
#first <- data.frame(uscases$Combined_Key,first)
hist(date,breaks=n,main="Histogram of the date of first cases in the US",ylab="number of counties/cities",xlab="Date of First Case",freq=TRUE)
firstdate <- as.Date(firstdate,origin = "2020-01-22")
#first <- data.frame(uscases$Combined_Key,first)
hist(firstdate,breaks=n,main="Histogram of the date of first cases in the US",ylab="number of counties/cities",xlab="Date of First Case",freq=TRUE)
library(Rcpp)
cppfunction('int first(NumericMatrix uscases, int row){
int n = uscases.ncol();
NumericVector temp(n);
temp = uscases(row,_);
NumericVector date(n);
date[0] = 1;
for (int i=0; i<n; ++i){
date[i] += i;
}
int first = 0;
for (int i =0;i<n;++i){
if (temp[i] != 0){
first = date(i);
// return first;
}
if (temp[i] != 0){break;}
}
//int len = first.length();
return first;
}')
cppFunction('int first(NumericMatrix uscases, int row){
int n = uscases.ncol();
NumericVector temp(n);
temp = uscases(row,_);
NumericVector date(n);
date[0] = 1;
for (int i=0; i<n; ++i){
date[i] += i;
}
int first = 0;
for (int i =0;i<n;++i){
if (temp[i] != 0){
first = date(i);
// return first;
}
if (temp[i] != 0){break;}
}
//int len = first.length();
return first;
}')
firstdate <- rep(0,nrow(uscases))
for(i in 1:nrow(uscases)-1){
firstdate[i] <- first(casemat,i)
}
firstdate <- as.Date(firstdate,origin = "2020-01-22")
#first <- data.frame(uscases$Combined_Key,first)
hist(firstdate,breaks=n,main="Histogram of the date of first cases in the US",ylab="number of counties/cities",xlab="Date of First Case",freq=TRUE)
uscases <- read.csv(url("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_US.csv"))
usdeaths <- read.csv(url("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_deaths_US.csv"))
uscases <- uscases[,-c(1:10)]
usdeaths <- usdeaths[,-c(1:10)] #use these for the R code
n <- ncol(uscases) - 1
date <- 1:n
date <- as.Date(date,origin = "2020-01-21")
format(date,format = "%b %d %y")
first <- rep(0,nrow(uscases))
for (i in 1:nrow(uscases)){
temp <- uscases[i,1:n+1]
temp <- t(temp)
temp <- as.data.frame(temp)
temp <- cbind(date,temp)
tempcut <- temp[which(temp[,2]!=0),]
first[i] <- tempcut[1,1]
}
first <- as.Date(first,origin = "1970-01-01")
first <- data.frame(uscases$Combined_Key,first)
hist(first$first,breaks=n,main="Histogram of the date of first cases in the US",ylab="number of counties/cities",xlab="Date of First Case",freq=TRUE)
uscases <- uscases[,-c(1)]
usdeaths <- usdeaths[,-c(1,2)] #use these for the c++ code
casemat <- as.matrix(uscases)
n<-ncol(uscases)
#trying to make a c++ funtion to speed it up
library(Rcpp)
cppFunction('int first(NumericMatrix uscases, int row){
int n = uscases.ncol();
NumericVector temp(n);
temp = uscases(row,_);
NumericVector date(n);
date[0] = 1;
for (int i=0; i<n; ++i){
date[i] += i;
}
int first = 0;
for (int i =0;i<n;++i){
if (temp[i] != 0){
first = date(i);
// return first;
}
if (temp[i] != 0){break;}
}
//int len = first.length();
return first;
}')
firstdate <- rep(0,nrow(uscases))
for(i in 1:nrow(uscases)-1){
firstdate[i] <- first(casemat,i)
}
firstdate <- as.Date(firstdate,origin = "2020-01-22")
#first <- data.frame(uscases$Combined_Key,first)
hist(firstdate,breaks=n,main="Histogram of the date of first cases in the US",ylab="number of counties/cities",xlab="Date of First Case",freq=TRUE)
firstdate <- as.Date(firstdate,origin = "2020-01-22")
#first <- data.frame(uscases$Combined_Key,first)
hist(firstdate,breaks=n,main="Histogram of the date of first cases in the US",ylab="number of counties/cities",xlab="Date of First Case",freq=TRUE)
firstdate <- as.Date(firstdate,origin = "2020-01-22")
#first <- data.frame(uscases$Combined_Key,first)
hist(firstdate,breaks=n,main="Histogram of the date of first cases in the US",ylab="number of counties/cities",xlab="Date of First Case",freq=TRUE)
firstdate <- as.Date(firstdate,origin = "2020-01-22")
#first <- data.frame(uscases$Combined_Key,first)
hist(firstdate,breaks=n,main="Histogram of the date of first cases in the US",ylab="number of counties/cities",xlab="Date of First Case",freq=TRUE)
uscases <- uscases[,-c(1)]
usdeaths <- usdeaths[,-c(1,2)] #use these for the c++ code
casemat <- as.matrix(uscases)
n<-ncol(uscases)
#trying to make a c++ funtion to speed it up
library(Rcpp)
cppFunction('int first(NumericMatrix uscases, int row){
int n = uscases.ncol();
NumericVector temp(n);
temp = uscases(row,_);
NumericVector date(n);
date[0] = 1;
for (int i=0; i<n; ++i){
date[i] += i;
}
int first = 0;
for (int i =0;i<n;++i){
if (temp[i] != 0){
first = date(i);
// return first;
}
if (temp[i] != 0){break;}
}
//int len = first.length();
return first;
}')
firstdate <- rep(0,nrow(uscases))
for(i in 1:nrow(uscases)-1){
firstdate[i] <- first(casemat,i)
}
firstdate <- as.Date(firstdate,origin = "2020-01-22")
#first <- data.frame(uscases$Combined_Key,first)
hist(firstdate,breaks=n,main="Histogram of the date of first cases in the US",ylab="number of counties/cities",xlab="Date of First Case",freq=TRUE)
uscases <- read.csv(url("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_US.csv"))
usdeaths <- read.csv(url("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_deaths_US.csv"))
uscases <- uscases[,-c(1:10)]
usdeaths <- usdeaths[,-c(1:10)] #use these for the R code
n <- ncol(uscases) - 1
date <- 1:n
date <- as.Date(date,origin = "2020-01-21")
format(date,format = "%b %d %y")
first <- rep(0,nrow(uscases))
for (i in 1:nrow(uscases)){
temp <- uscases[i,1:n+1]
temp <- t(temp)
temp <- as.data.frame(temp)
temp <- cbind(date,temp)
tempcut <- temp[which(temp[,2]!=0),]
first[i] <- tempcut[1,1]
}
first <- as.Date(first,origin = "1970-01-01")
first <- data.frame(uscases$Combined_Key,first)
hist(first$first,breaks=n,main="Histogram of the date of first cases in the US",ylab="number of counties/cities",xlab="Date of First Case",freq=TRUE)
########################################################################################
####################################################################################################
################################################################################################################
uscases <- uscases[,-c(1)]
usdeaths <- usdeaths[,-c(1,2)] #use these for the c++ code
casemat <- as.matrix(uscases)
n<-ncol(uscases)
#trying to make a c++ funtion to speed it up
library(Rcpp)
cppFunction('int first(NumericMatrix uscases, int row){
int n = uscases.ncol();
NumericVector temp(n);
temp = uscases(row,_);
NumericVector date(n);
date[0] = 1;
for (int i=0; i<n; ++i){
date[i] += i;
}
int first = 0;
for (int i =0;i<n;++i){
if (temp[i] != 0){
first = date(i);
// return first;
}
if (temp[i] != 0){break;}
}
//int len = first.length();
return first;
}')
firstdate <- rep(0,nrow(uscases))
for(i in 1:nrow(uscases)-1){
firstdate[i] <- first(casemat,i)
}
firstdate <- as.Date(firstdate,origin = "2020-01-22")
#first <- data.frame(uscases$Combined_Key,first)
hist(firstdate,breaks=n,main="Histogram of the date of first cases in the US",ylab="number of counties/cities",xlab="Date of First Case",freq=TRUE)
firstdate <- rep(0,nrow(uscases))
for(i in 1:nrow(uscases)-1){
firstdate[i] <- first(casemat,i)
}
firstdate <- firstdate[which(firstdate!=0)]
firstdate <- as.Date(firstdate,origin = "2020-01-22")
#first <- data.frame(uscases$Combined_Key,first)
hist(firstdate,breaks=n,main="Histogram of the date of first cases in the US",ylab="number of counties/cities",xlab="Date of First Case",freq=TRUE)
firstdate <- rep(0,nrow(uscases))
for(i in 1:nrow(uscases)-1){
firstdate[i] <- first(casemat,i)
}
firstdate <- firstdate[which(firstdate!=0)]
firstdate <- as.Date(firstdate,origin = "2020-01-22")
#first <- data.frame(uscases$Combined_Key,first)
hist(firstdate,breaks=n,main="Histogram of the date of first cases in the US",ylab="number of counties/cities",xlab="Date of First Case",freq=TRUE)
firstdate <- rep(0,nrow(uscases))
for(i in 1:nrow(uscases)-1){
firstdate[i] <- first(casemat,i)
}
#firstdate <- firstdate[which(firstdate!=0)]
firstdate <- as.Date(firstdate,origin = "2020-01-22")
#first <- data.frame(uscases$Combined_Key,first)
hist(firstdate,breaks=n,main="Histogram of the date of first cases in the US",ylab="number of counties/cities",xlab="Date of First Case",freq=TRUE)
firstdate <- firstdate[which(firstdate!=0)]
firstdate <- as.Date(firstdate,origin = "2020-01-22")
#first <- data.frame(uscases$Combined_Key,first)
hist(firstdate,breaks=n,main="Histogram of the date of first cases in the US",ylab="number of counties/cities",xlab="Date of First Case",freq=TRUE)
firstdate <- rep(0,nrow(uscases))
for(i in 1:nrow(uscases)-1){
firstdate[i] <- first(casemat,i)
}
firstdate <- firstdate[which(firstdate!=0)]
firstdate <- as.Date(firstdate,origin = "2020-01-22")
#first <- data.frame(uscases$Combined_Key,first)
hist(firstdate,breaks=n,main="Histogram of the date of first cases in the US",ylab="number of counties/cities",xlab="Date of First Case",freq=TRUE)
